{"remainingRequest":"E:\\研一下\\Vue学习\\前端\\vue_node_admin-master\\item\\node_modules\\babel-loader\\lib\\index.js!E:\\研一下\\Vue学习\\前端\\vue_node_admin-master\\item\\src\\store\\modules\\permission.js","dependencies":[{"path":"E:\\研一下\\Vue学习\\前端\\vue_node_admin-master\\item\\src\\store\\modules\\permission.js","mtime":1682257123000},{"path":"E:\\研一下\\Vue学习\\前端\\vue_node_admin-master\\item\\babel.config.js","mtime":1682257123000},{"path":"E:\\研一下\\Vue学习\\前端\\vue_node_admin-master\\item\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1683432540690},{"path":"E:\\研一下\\Vue学习\\前端\\vue_node_admin-master\\item\\node_modules\\babel-loader\\lib\\index.js","mtime":1683432547123}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkU6L1x1NzgxNFx1NEUwMFx1NEUwQi9WdWVcdTVCNjZcdTRFNjAvXHU1MjREXHU3QUVGL3Z1ZV9ub2RlX2FkbWluLW1hc3Rlci9pdGVtL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJFOi9cdTc4MTRcdTRFMDBcdTRFMEIvVnVlXHU1QjY2XHU0RTYwL1x1NTI0RFx1N0FFRi92dWVfbm9kZV9hZG1pbi1tYXN0ZXIvaXRlbS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkuanMiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICJFOi9cdTc4MTRcdTRFMDBcdTRFMEIvVnVlXHU1QjY2XHU0RTYwL1x1NTI0RFx1N0FFRi92dWVfbm9kZV9hZG1pbi1tYXN0ZXIvaXRlbS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMi5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCB7IGNvbnN0YW50Um91dGVzIH0gZnJvbSAnQC9yb3V0ZXInOwppbXBvcnQgTGF5b3V0IGZyb20gJ0AvbGF5b3V0JzsKaW1wb3J0IHBhcmVudFZpZXcgZnJvbSAnQC9jb21wb25lbnRzL3BhcmVudFZpZXcnOwppbXBvcnQgeyBnZXRSb3V0ZXIgfSBmcm9tICdAL2FwaS9hZG1pbic7Ci8qKgogKiBVc2UgbWV0YS5yb2xlIHRvIGRldGVybWluZSBpZiB0aGUgY3VycmVudCB1c2VyIGhhcyBwZXJtaXNzaW9uCiAqIEBwYXJhbSByb2xlcwogKiBAcGFyYW0gcm91dGUKICovCgpmdW5jdGlvbiBoYXNQZXJtaXNzaW9uKHJvbGVzLCByb3V0ZSkgewogIGlmIChyb3V0ZS5tZXRhICYmIHJvdXRlLm1ldGEucm9sZXMpIHsKICAgIHJldHVybiByb2xlcy5zb21lKGZ1bmN0aW9uIChyb2xlKSB7CiAgICAgIHJldHVybiByb3V0ZS5tZXRhLnJvbGVzLmluY2x1ZGVzKHJvbGUpOwogICAgfSk7CiAgfSBlbHNlIHsKICAgIHJldHVybiB0cnVlOwogIH0KfQoKZXhwb3J0IHZhciBsb2FkVmlldyA9IGZ1bmN0aW9uIGxvYWRWaWV3KHZpZXcpIHsKICAvLyDot6/nlLHmh5LliqDovb0KICByZXR1cm4gZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgIHJldHVybiByZXF1aXJlKFsiQC92aWV3cy8iLmNvbmNhdCh2aWV3LCAiLnZ1ZSIpXSwgcmVzb2x2ZSk7CiAgfTsKfTsKLyoqCiAqIEZpbHRlciBhc3luY2hyb25vdXMgcm91dGluZyB0YWJsZXMgYnkgcmVjdXJzaW9uCiAqIEBwYXJhbSByb3V0ZXMgYXN5bmNSb3V0ZXMKICogQHBhcmFtIHJvbGVzCiAqLwoKZXhwb3J0IGZ1bmN0aW9uIGZpbHRlckFzeW5jUm91dGVzKHJvdXRlcykgewogIC8v6I+c5Y2VICAg5p2D6ZmQ5pWw57uECiAgdmFyIG1lbnUgPSBbXSwKICAgICAgcm9sZSA9IFtdOwogIHJvdXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChyb3V0ZSkgewogICAgdmFyIHRtcCA9IF9vYmplY3RTcHJlYWQoe30sIHJvdXRlKTsgLy8g5Yqo5oCB5Yqg6L296aG16Z2iCgoKICAgIGlmICh0bXAuY29tcG9uZW50ICE9PSAnJykgewogICAgICB0bXAuY29tcG9uZW50ID0gbG9hZFZpZXcodG1wLmNvbXBvbmVudCk7CiAgICB9IC8vIOWKqOaAgeWKoOi9veW3pui+ueS4u+S9k+iPnOWNlQoKCiAgICBpZiAodG1wLmxheW91dCkgewogICAgICB0bXAuY29tcG9uZW50ID0gTGF5b3V0OwogICAgfSAvLyDlpoLmnpzov5jpnIDopoHlpZfkuoznuqcKCgogICAgaWYgKHRtcC5tZW51VHlwZSA9PT0gIk0iICYmIHRtcC5wYXJlbnRJZCAhPSAwKSB7CiAgICAgIHRtcC5jb21wb25lbnQgPSBwYXJlbnRWaWV3OwogICAgfQoKICAgIGlmICh0bXAuY2hpbGRyZW4gJiYgdG1wLmNoaWxkcmVuLmxlbmd0aCAhPSAwKSB7CiAgICAgIHZhciBjaGlsZHJlblJlcyA9IGZpbHRlckFzeW5jUm91dGVzKHRtcC5jaGlsZHJlbik7CiAgICAgIHRtcC5jaGlsZHJlbiA9IGNoaWxkcmVuUmVzLm1lbnU7CiAgICAgIHJvbGUucHVzaC5hcHBseShyb2xlLCBfdG9Db25zdW1hYmxlQXJyYXkoY2hpbGRyZW5SZXMucm9sZSkpOwogICAgfQoKICAgIHRtcC5yb2xlS2V5ICYmIHJvbGUucHVzaCh0bXAucm9sZUtleSk7CiAgICBtZW51LnB1c2godG1wKTsKICB9KTsKICByZXR1cm4gewogICAgbWVudTogbWVudSwKICAgIHJvbGU6IHJvbGUKICB9Owp9CnZhciBzdGF0ZSA9IHsKICByb3V0ZXM6IFtdLAogIGFkZFJvdXRlczogW10sCiAgcm9sZTogW10KfTsKdmFyIG11dGF0aW9ucyA9IHsKICBTRVRfUk9VVEVTOiBmdW5jdGlvbiBTRVRfUk9VVEVTKHN0YXRlLCByb3V0ZXMpIHsKICAgIHN0YXRlLmFkZFJvdXRlcyA9IHJvdXRlczsKICAgIHN0YXRlLnJvdXRlcyA9IGNvbnN0YW50Um91dGVzLmNvbmNhdChyb3V0ZXMpOwogIH0sCiAgU0VUX1JPTEU6IGZ1bmN0aW9uIFNFVF9ST0xFKHN0YXRlLCByb2xlKSB7CiAgICByZXR1cm4gc3RhdGUucm9sZSA9IHJvbGU7CiAgfQp9Owp2YXIgYWN0aW9ucyA9IHsKICBnZW5lcmF0ZVJvdXRlczogZnVuY3Rpb24gZ2VuZXJhdGVSb3V0ZXMoX3JlZikgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIGNvbW1pdCwgX3lpZWxkJGdldFJvdXRlciwgZGF0YTsKCiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gZ2V0Um91dGVyKCk7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgX3lpZWxkJGdldFJvdXRlciA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgZGF0YSA9IF95aWVsZCRnZXRSb3V0ZXIuZGF0YTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgICAgICAgICAgdmFyIF9maWx0ZXJBc3luY1JvdXRlcyA9IGZpbHRlckFzeW5jUm91dGVzKGRhdGEucm91dGVyTWVudSksCiAgICAgICAgICAgICAgICAgICAgbWVudSA9IF9maWx0ZXJBc3luY1JvdXRlcy5tZW51LAogICAgICAgICAgICAgICAgICAgIHJvbGUgPSBfZmlsdGVyQXN5bmNSb3V0ZXMucm9sZTsKCiAgICAgICAgICAgICAgICBjb21taXQoJ1NFVF9ST1VURVMnLCBtZW51KTsKICAgICAgICAgICAgICAgIGNvbW1pdCgnU0VUX1JPTEUnLCByb2xlKTsKICAgICAgICAgICAgICAgIHJlc29sdmUobWVudSk7CiAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSgpOwogIH0KfTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6IHN0YXRlLAogIG11dGF0aW9uczogbXV0YXRpb25zLAogIGFjdGlvbnM6IGFjdGlvbnMKfTs="},{"version":3,"sources":["E:/研一下/Vue学习/前端/vue_node_admin-master/item/src/store/modules/permission.js"],"names":["constantRoutes","Layout","parentView","getRouter","hasPermission","roles","route","meta","some","role","includes","loadView","view","resolve","require","filterAsyncRoutes","routes","menu","forEach","tmp","component","layout","menuType","parentId","children","length","childrenRes","push","roleKey","state","addRoutes","mutations","SET_ROUTES","concat","SET_ROLE","actions","generateRoutes","commit","data","Promise","routerMenu","namespaced"],"mappings":"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","sourcesContent":["import {  constantRoutes } from '@/router'\nimport Layout from '@/layout'\nimport parentView from '@/components/parentView'\nimport { getRouter } from '@/api/admin'\n/**\n * Use meta.role to determine if the current user has permission\n * @param roles\n * @param route\n */\nfunction hasPermission(roles, route) {\n\n  if (route.meta && route.meta.roles) {\n    return roles.some(role => route.meta.roles.includes(role))\n  } else {\n    return true\n  }\n}\nexport const loadView = (view) => { // 路由懒加载\n  return (resolve) => require([`@/views/${view}.vue`], resolve)\n}\n/**\n * Filter asynchronous routing tables by recursion\n * @param routes asyncRoutes\n * @param roles\n */\nexport function filterAsyncRoutes(routes) {\n  //菜单   权限数组\n  const menu = [],role=[];\n  routes.forEach(route => {\n    const tmp = { ...route };\n    // 动态加载页面\n    if (tmp.component !== '') {\n      tmp.component = loadView(tmp.component);\n    }\n    // 动态加载左边主体菜单\n    if (tmp.layout) {\n      tmp.component = Layout\n    }\n    // 如果还需要套二级\n    if (tmp.menuType===\"M\"&&tmp.parentId!=0) {\n      tmp.component = parentView\n    }\n    if (tmp.children && tmp.children.length != 0) {\n      let childrenRes=filterAsyncRoutes(tmp.children);\n      tmp.children =childrenRes.menu;\n      role.push(...childrenRes.role);\n    }\n\n    tmp.roleKey&&role.push(tmp.roleKey);\n    menu.push(tmp)\n  })\n\n  return {\n    menu,\n    role\n  }\n}\n\nconst state = {\n  routes: [],\n  addRoutes: [],\n  role:[]\n}\n\nconst mutations = {\n  SET_ROUTES: (state, routes) => {\n    state.addRoutes = routes\n    state.routes = constantRoutes.concat(routes)\n  },\n  SET_ROLE:(state,role)=>state.role=role\n}\n\nconst actions = {\n  async generateRoutes({ commit }) {\n    const {data} = await getRouter();\n    return new Promise(resolve => {\n      let {menu,role} = filterAsyncRoutes(data.routerMenu);\n      commit('SET_ROUTES', menu);\n      commit('SET_ROLE', role);\n      resolve(menu)\n    })\n  }\n}\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions\n}\n"]}]}